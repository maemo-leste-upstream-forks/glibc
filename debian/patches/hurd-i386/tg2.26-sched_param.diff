From: Samuel Thibault <samuel.thibault@ens-lyon.org>
Subject: [PATCH] Bring back __sched_param to bits/sched.h

Upstream removed it because it doesn't use it, but we do: our pthread.h
includes thread-attr.h to bring the pthread_attr_t type to applications,
and thus needs the sched_param structure.

Note: that uses __sched_param and not sched_param because thread-attr.h
is also also brought in from sys/types.h, which should not expose
sched_param if not requested to by applicationg defining _POSIX_SOURCE
and alike.

Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>

---
 bits/sched.h | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/bits/sched.h b/bits/sched.h
index 0588f3142e..e96ee3ba03 100644
--- a/bits/sched.h
+++ b/bits/sched.h
@@ -17,6 +17,8 @@
    License along with the GNU C Library; if not, see
    <http://www.gnu.org/licenses/>.  */
 
+#ifndef __need_schedparam
+
 #ifndef _BITS_SCHED_H
 #define _BITS_SCHED_H 1
 
@@ -36,3 +38,17 @@ struct sched_param
 };
 
 #endif /* bits/sched.h */
+
+#endif	/* need schedparam */
+
+#if !defined __defined_schedparam \
+    && (defined __need_schedparam || defined _SCHED_H)
+# define __defined_schedparam	1
+/* Data structure to describe a process' schedulability.  */
+struct __sched_param
+  {
+    int __sched_priority;
+  };
+# undef __need_schedparam
+#endif
+
-- 
tg: (854baea9b7..) t2.26/sched_param (depends on: baseline-2.26)
